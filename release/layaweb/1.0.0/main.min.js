function onLoading(t){console.log("正在加载,加载进度: "+t+"\n"),loading.progress(t)}function onLoaded(){console.log("图片资源加载完毕\n"),Laya.stage.renderingEnabled=!0,Laya.stage.removeChild(loading);var t=new RunGame;this.runGame=t,Laya.stage.addChild(t),Laya.stage.addChild(gameInfo)}function initGame(t){gameInfo.init("游戏已结束!请重新开始游戏!"),Laya.stage.removeChildren(this.runGame),onLoaded()}var BG_WIDTH=800,BG_HEIGHT=480,FLOOR_HEIGHT=84,FLOOR_WIDTH=960,PLAYER_WIDTH=96,PLAYER_HEIGHT=96,ENERGY_BG_BAR_WIDTH=180,ENERGY_BG_BAR_HEIGHT=21,ENERGY_BAR_WIDTH=155,ENERGY_BAR_HEIGHT=12,ITEM_STAR_WIDTH=32,ITEM_STAR_HEIGHT=32,ITEM_STAR_PROBABILITY=.8,ITEM_DECELERATION_WIDTH=40,ITEM_DECELERATION_HEIGHT=53,ITEM_DECELERAYION_PROBABILITY=.1,ITEM_INVINCIBLE_WIDTH=40,ITEM_INVINCIBLE_HEIGHT=48,ITEM_INVINCIBLE_PROBABILITY=.08,NPC_BIRD_WIDTH=96,NPC_BIRD_HEIGHT=96,NPC_BIRD_PROBABLITY=.1,NPC_BIRD_INTANCE=200,ITEM_INVINCIBLE_DESCENT_SPEED=.2,ITEM_DECELERATION_DESCENT_SPEED=.8,BG_SPEED=3,BG_FRAME_DELAY=1,PLAYER_FRAME_DELAY=1,PLAYER_RUN_SPEED_DEFAULT=190,PLAYER_RUN_SPEED=PLAYER_RUN_SPEED_DEFAULT,PLAYER_DOWN_VY=0,PLAYER_DOWN_SPEED=2,PLAYER_DOWN_MAX_SPEED=32,NPC_BIRD_INTERVAL=100,FLOOR_SPEED_DEFAULT=3.2,FLOOR_SPEED=3.2,FLOOR_SPEED_MAX=10,FLOOR_SPEED_FASTER_STEP=.001,IS_FLOOR_SPEED_MAX=!1,FLOOR_FRAME_DELAY=1,MAP_FLOOR_FRAME_DELAY=10,ENERGY_BAR_MIN_VALUE=0,ENERGY_BAR_MAX_VALUE=100,ENERGY_BAR_X=15,ENERGY_BAR_Y=2,ITEMNUM_ON_FLOOR=2,NPC_BIRD_NUM_ON_FLOOR=2,SCORETEXT_COLOR="#FFFFFF",SCORETEXT_FONT_SIZE=30,SCORETEXT_TEXT_DEFAULT=0,SCORETEXT_ALIGN="right",IS_PAUSE=!1,IS_OVER=!1,BG_MUSIC_VOLUME=.5,Sprite=laya.display.Sprite,Handler=laya.utils.Handler,Animation=laya.display.Animation,SoundManager=laya.media.SoundManager,Pool=laya.utils.Pool,Text=laya.display.Text,Tween=laya.utils.Tween;window.conch&&window.conch.config.setDebugLevel(2),function(){function t(){this.bg=null,this.txt=null,t.__super.call(this);var i=null;this.init(i)}Laya["class"](t,"GameInfo",laya.display.Sprite);var i=t.prototype;i.init=function(t){this.width=BG_WIDTH,this.height=BG_HEIGHT,IS_PAUSE=!0,this.bg=new Sprite,this.bg.alpha=.8,this.bg.graphics.drawRect(0,0,BG_WIDTH,BG_HEIGHT,"#000000"),this.addChild(this.bg),this.txt=new Text,this.txt.color="#ffffff",this.txt.fontSize=20,""==t||null==t?this.txt.text="游戏介绍\n\n点击可控制人物翻转\n\n左上角紫色条代表当前启动无敌状态 黄色条代表减速速状态\n\n\n好了 点击屏幕开始狂奔之旅吧~~":this.txt.text=t,this.txt.width=BG_WIDTH,this.txt.align="center",this.txt.y=.5*(BG_HEIGHT-this.txt.height),this.addChild(this.txt)}}(),function(){function t(){this.bg=null,this.txt=null,t.__super.call(this),this.init()}Laya["class"](t,"Loading",laya.display.Sprite);var i=t.prototype;i.init=function(){this.bg=new Sprite,this.bg.graphics.drawRect(0,0,BG_WIDTH,BG_HEIGHT,"#000000"),this.addChild(this.bg),this.txt=new Text,this.txt.color="#ffffff",this.txt.fontSize=30,this.txt.text="Loading......",this.txt.width=BG_WIDTH,this.txt.align="center",this.txt.y=.5*(BG_HEIGHT-this.txt.height),this.addChild(this.txt)},i.progress=function(t){this.txt.text="Loading "+parseInt(100*t)+"%"}}(),Laya.init(BG_WIDTH,BG_HEIGHT,Laya.WebGL),Laya.stage.scaleMode="exactfit",Laya.stage.alignH="center",Laya.stage.screenMode="none",Laya.stage.scaleMode="showall";var loading=new Loading;Laya.stage.addChild(loading),this.runGame=null;var gameInfo=new GameInfo,asset=[];asset.push({url:["res/BackGround.png","res/tree0.png","res/floor.png","res/cat_sleep.png","res/bird/bird_1.png","res/bird/bird_2.png","res/bird/bird_3.png","res/bird/bird_4.png","res/item/item_1.png","res/item/item_2.png","res/item/item_3.png","res/item/item_4.png","res/hp/hp_bg.png","res/hp/hp_bar.png","res/hp/en_bar.png","res/effect.png","res/particle/heart.png"],type:Laya.Loader.IMAGE}),asset.push({url:"res/player.json",type:Laya.Loader.ATLAS}),Laya.loader.load(asset,Handler.create(this,onLoaded),Handler.create(this,onLoading,null,!1)),function(){function t(){this.bg1=null,this.bg2=null,this.tree=null,this.cat=null,t.__super.call(this),this.init()}Laya["class"](t,"BackGround",Sprite);var i=t.prototype;i.init=function(){var t=Laya.loader.getRes("res/BackGround.png"),i=Laya.loader.getRes("res/BackGround.png"),e=Laya.loader.getRes("res/tree0.png"),s=Laya.loader.getRes("res/m_background.png");Laya.SoundManager.musicVolume=BG_MUSIC_VOLUME,Laya.SoundManager.playMusic("res/wav/BG.wav",0),this.bg1=new Sprite,this.bg1.graphics.drawTexture(t,0,0),this.addChild(this.bg1),this.bg2=new Sprite,this.bg2.graphics.drawTexture(i,0,0),this.addChild(this.bg2),this.bg2.pos(BG_WIDTH,0),this.tree=new Sprite,this.tree.graphics.drawTexture(e,0,0),this.addChild(this.tree),this.tree.pos(BG_WIDTH,64),this.cat=new Sprite,this.cat.graphics.drawTexture(s,0,0,64,64),this.addChild(this.cat),Laya.timer.frameLoop(BG_FRAME_DELAY,this,this.onLoop)},i.onLoop=function(){IS_PAUSE||IS_OVER||(this.x-=BG_SPEED,this.bg1.x+this.x<=-BG_WIDTH&&(this.bg1.x+=2*BG_WIDTH),this.bg2.x+this.x<=-BG_WIDTH&&(this.bg2.x+=2*BG_WIDTH),this.tree.x+this.x<=-BG_WIDTH&&(this.tree.x+=2*BG_WIDTH),this.cat.x+this.x<=-BG_WIDTH&&(this.cat.x+=2*BG_WIDTH))}}(),function(){function t(i){this.bg=null,this.bar=null,this.minValue=ENERGY_BAR_MIN_VALUE,this.maxValue=ENERGY_BAR_MAX_VALUE,this.bodyEffect1=null,this.bodyEffect2=null,this.spiritEffect=null,this.value=0,t.__super.call(this),this.SoundManager=laya.media.SoundManager,this.init(i)}t.TYPE_DECELERATION="Deceleration",t.TYPE_INVINCIBLE="Invincible",Laya["class"](t,"EnergyBar",Sprite);var i=t.prototype;i.init=function(i){this.width=ENERGY_BG_BAR_WIDTH,this.height=ENERGY_BG_BAR_HEIGHT;var e=Laya.loader.getRes("res/hp/hp_bg.png"),s=null;switch(i){case t.TYPE_DECELERATION:s=Laya.loader.getRes("res/hp/en_bar.png");break;case t.TYPE_INVINCIBLE:s=Laya.loader.getRes("res/hp/hp_bar.png")}this.bg=new Sprite,this.bar=new Sprite,this.bar.x=ENERGY_BAR_X,this.bar.y=ENERGY_BAR_Y,this.bar.scale(this.value/this.maxValue,1),this.bg.graphics.drawTexture(e,0,0,ENERGY_BG_BAR_WIDTH,ENERGY_BG_BAR_HEIGHT),this.bar.graphics.drawTexture(s,0,0,ENERGY_BAR_WIDTH,ENERGY_BAR_HEIGHT),this.addChild(this.bg),this.addChild(this.bar)},i.updateEnergyValue=function(t){this.value=t,this.value>this.maxValue&&(this.value=this.maxValue),this.value<this.minValue&&(this.value=this.minValue),this.bar.scale(this.value/this.maxValue,1)},i.addEnergyValue=function(t){this.value+=t,this.updateEnergyValue(this.value)}}(),function(){function t(){this.bgTexture=null,this.bg=null,this.maxRight=0,this.isOutComplete=!1,this.rightBg=null,this.itemList=[],this.birdList=[],this.timer=null,t.__super.call(this)}t.OUT_COMPLETE="floor_out_complete",t.OUT_DIE="floor_out_die",Laya["class"](t,"Floor",Sprite);var i=t.prototype;i.init=function(t){var i=!0;this.autoSize=!0,this.x=BG_WIDTH,this.y=(BG_HEIGHT-FLOOR_HEIGHT)/2,null==this.bg&&(this.bgTexture=Laya.loader.getRes("res/floor.png"),this.bg=new Sprite,this.bg.graphics.clear(),this.addChild(this.bg)),this.bg.graphics.drawTexture(this.bgTexture,0,0),i&&this.addItem(),this.addBird(),Laya.timer.frameLoop(FLOOR_FRAME_DELAY,this,this.onLoop)},i.onLoop=function(){if(!IS_PAUSE&&!IS_OVER)if(this.x-=FLOOR_SPEED,IS_FLOOR_SPEED_MAX||this.moveFaster(),!this.isOutComplete&&this.x+BG_WIDTH<FLOOR_WIDTH)this.isOutComplete=!0,this.event(t.OUT_COMPLETE,this);else if(this.x+BG_WIDTH+FLOOR_WIDTH<0){Laya.timer.clear(this,this.onLoop);for(var i=0;i<this.itemList.length;i++);this.visible=!1,this.event(t.OUT_DIE,this)}},i.addItem=function(){var t=parseInt(10*Math.random());if(!(1>t)){var i=0,e=Math.floor(FLOOR_WIDTH/32);i=e>=5?5+Math.floor((e-5)*Math.random()):e;for(var s=FLOOR_WIDTH/i,a=[],n=!1,r=0;i>r;r++)if(r%ITEMNUM_ON_FLOOR!=0){if(t=Math.random(),this.itemList.length>0)h=this.itemList.shift(),h.visible=!0;else var h=Pool.getItemByClass("Item",Item);t>=1-ITEM_INVINCIBLE_PROBABILITY?(n=!0,h.init(Item.ITEM_TYPE_INCINCIBLE)):t>=1-ITEM_DECELERAYION_PROBABILITY?(n=!0,h.init(Item.ITEM_TYPE_DECELERATION)):t>=1-ITEM_STAR_PROBABILITY&&(n=!0,h.init(Item.ITEM_TYPE_STAR)),h.x=s+32*r,h=h.randomItemPosition(h),this.addChild(h),a.push(h)}this.itemList=[].concat(a)}},i.getAllItems=function(){return this.itemList},i.addBird=function(){var t=parseInt(10*Math.random());if(!(5>t)){var i=0,e=Math.floor(FLOOR_WIDTH/NPC_BIRD_INTANCE);i=e>=5?5+Math.floor((e-5)*Math.random()):e;for(var s=FLOOR_WIDTH/i,a=[],n=0;i>n;n++)if(n%NPC_BIRD_NUM_ON_FLOOR!=0){if(t=Math.random(),this.birdList.length>0)r=this["this"].birdList.shift(),r.visible=!0;else var r=Pool.getItemByClass("Npc",Npc);t>=1-NPC_BIRD_PROBABLITY&&r.init(),r.x=s+128*n,r=r.randomNpcPosition(r),this.addChild(r),a.push(r)}this.birdList=[].concat(a)}},i.getAllNpcs=function(){return this.birdList},i.moveFaster=function(){return FLOOR_SPEED>=FLOOR_SPEED_MAX?void(IS_FLOOR_SPEED_MAX=!0):(window.clearTimeout(this.timer),FLOOR_SPEED+=FLOOR_SPEED_FASTER_STEP,void(this.timer=window.setTimeout(this.moveFaster,100)))},i.moveLower=function(t){FLOOR_SPEED=FLOOR_SPEED_DEFAULT,IS_FLOOR_SPEED_MAX=!1,t.player.isInLowerSpeed=!1,t.player.decelerationEnergy.updateEnergyValue(0)},i.checkHit=function(t,i,e){return i>this.y&&i<this.y+FLOOR_HEIGHT&&"up"==e?!0:i<this.y&&i>this.y+FLOOR_HEIGHT&&"down"==e}}(),function(){function t(){this.icon=null,this.starTexture=null,this.decelerationTexure=null,this.invincibleTexture=null,this.type="",this.directionStatus="up",t.__super.call(this)}t.ITEM_TYPE_STAR="ITEM_TYPE_STAR",t.ITEM_TYPE_DECELERATION="ITEM_TYPE_DECELERATION",t.ITEM_TYPE_INCINCIBLE="ITEM_TYPE_INVINCIBLE",Laya["class"](t,"Item",laya.display.Sprite),_proto=t.prototype,_proto.TweenStar=function(t){Tween.to(t,{y:-5,scaleX:.1,alpha:0},200,null,Handler.create(this,this.undefinedFunc,[t]))},_proto.randomItemPosition=function(t){var i=parseInt(100*Math.random());return 50>=i?(t.directionStatus="up",t.y=-30):(t.directionStatus="down",t.y=FLOOR_HEIGHT+50,t.skewX=180,t.skewY=180,t.scaleX=-1),t},_proto.init=function(i){switch(this.type=i,null==this.icon&&(this.starTexture=Laya.loader.getRes("res/item/item_1.png"),this.decelerationTexure=Laya.loader.getRes("res/item/item_3.png"),this.invincibleTexture=Laya.loader.getRes("res/item/item_4.png"),this.icon=new Sprite),this.icon.graphics.clear(),i){case t.ITEM_TYPE_STAR:this.icon.graphics.drawTexture(this.starTexture,0,0,ITEM_STAR_WIDTH,ITEM_STAR_HEIGHT);break;case t.ITEM_TYPE_DECELERATION:this.icon.graphics.drawTexture(this.decelerationTexure,0,0,ITEM_DECELERATION_WIDTH,ITEM_DECELERATION_HEIGHT);break;case t.ITEM_TYPE_INCINCIBLE:this.icon.graphics.drawTexture(this.invincibleTexture,0,0,ITEM_INVINCIBLE_WIDTH,ITEM_INVINCIBLE_HEIGHT);break;default:alert("道具指令错误!")}this.addChild(this.icon)}}(),function(){function t(){this.dieFloorList=[],t.__super.call(this),this.init()}Laya["class"](t,"MapFloor",Sprite);var i=t.prototype;i.init=function(){var t=this.addFloor();t.x=0,Laya.timer.frameLoop(MAP_FLOOR_FRAME_DELAY,this,this.onLoop)},i.onLoop=function(){for(;this.dieFloorList.lenght>0;){var t=this.dieFloorList.shift();t.removeSelf(),Pool.recover("floor",t)}},i.addFloor=function(){var t=Pool.getItemByClass("floor",Floor);return t.init(),t.once(Floor.OUT_COMPLETE,this,this.getFloor),t.once(Floor.OUT_DIE,this,this.delFloor),this.addChild(t),t},i.getFloor=function(t){this.addFloor()},i.delFloor=function(t){this.dieFloorList.push(t)}}(),function(){function t(){this.body=null,t.__super.call(this),this.init()}Laya["class"](t,"Npc",Sprite);var i=t.prototype;t.cached=!1,t.BIRD="bird",this.type="",t.NPC_TYPE_BIRD="NPC_TYPE_BIRD",i.init=function(){t.cached||(t.cached=!0,Animation.createFrames(["res/bird/bird_1.png","res/bird/bird_2.png","res/bird/bird_3.png","res/bird/bird_4.png"],t.BIRD)),null==this.body&&(this.body=new Animation,this.body.interval=NPC_BIRD_INTERVAL,this.type=t.NPC_TYPE_BIRD,this.addChild(this.body),this.body.play(0,!0,t.BIRD),Laya.timer.frameLoop(1,this,this.onLoop))},i.onLoop=function(){IS_OVER||this.body.x<-100&&(this.removeSelf(),Pool.recover("Npc",this),Laya.timer.clear(this,this.onLoop))},i.randomNpcPosition=function(t){var i=parseInt(100*Math.random());return 50>=i?(t.directionStatus="up",t.y=-NPC_BIRD_HEIGHT/2):(t.directionStatus="down",t.y=FLOOR_HEIGHT+NPC_BIRD_HEIGHT/3*2,t.skewX=180,t.skewY=180,t.scaleX=-1),t}}(),function(){function t(i,e){this.decelerationEnergy=i,this.invincibleEnergy=e,this.action=null,this.body=null,this.status="up",this.isOnFloor=!1,this.isInEffect=!1,this.isInLowerSpeed=!1,this.vy=PLAYER_DOWN_VY,this.downSpeed=PLAYER_DOWN_SPEED,this.maxVy=PLAYER_DOWN_MAX_SPEED,this.isStopDown=!1,this.width=96,this.height=96,this.sp=null,t.__super.call(this),this.init()}t.RUN="player_run",t.FLY="player_fly",t.DIE="player_die",Laya["class"](t,"Player",Sprite),t.cached=!1;var i=t.prototype;i.init=function(){t.cached||(Animation.createFrames(["res/player/chara_01.png","res/player/chara_02.png","res/player/chara_03.png","res/player/chara_04.png"],t.RUN),Animation.createFrames(["res/player/chara_05.png","res/player/chara_06.png","res/player/chara_07.png","res/player/chara_08.png"],t.FLY),t.cached=!0),null==this.body&&(this.body=new Animation,this.body.interval=PLAYER_RUN_SPEED,this.addChild(this.body)),this.playAction(t.RUN),Laya.timer.frameLoop(PLAYER_FRAME_DELAY,this,this.onLoop)},i.playAction=function(t){this.action!=t&&(this.action=t,this.body.play(0,!0,this.action))},i.onLoop=function(){if(this.body.x=BG_WIDTH/10,this.isStopDown)this.isStopDown;else if(this.y+=this.vy,this.vy+=this.downSpeed,this.vy>=this.maxVy&&(this.vy=this.maxVy),this.y>BG_HEIGHT)return;this.isInEffect&&(this.invincibleEnergy.addEnergyValue(-ITEM_INVINCIBLE_DESCENT_SPEED),this.invincibleEnergy.value<=0&&this.hideEffect()),this.isInLowerSpeed&&(this.decelerationEnergy.addEnergyValue(-ITEM_DECELERATION_DESCENT_SPEED),this.decelerationEnergy.value<=0&&this.decelerationEnergy.updateEnergyValue(0))},i.hitCheck=function(t,i,e,s,a,n,r){var h=0,o=0;switch(n){case Npc.NPC_TYPE_BIRD:h=NPC_BIRD_WIDTH,o=NPC_BIRD_HEIGHT;break;case Item.ITEM_TYPE_STAR:h=ITEM_STAR_WIDTH,o=ITEM_STAR_HEIGHT;break;case Item.ITEM_TYPE_DECELERATION:h=ITEM_DECELERATION_WIDTH,o=ITEM_DECELERATION_HEIGHT;break;case Item.ITEM_TYPE_INVINCIBLE:h=ITEM_INVINCIBLE_WIDTH,o=ITEM_INVINCIBLE_HEIGHT}return"up"==r?t-Math.abs(e)-h/2>=0&&"up"==a&&e+h+PLAYER_WIDTH/2>t:"down"==r?t-Math.abs(e)-h/2>=0&&"down"==a&&e+h+PLAYER_WIDTH/2>t:void 0},i.gotoRun=function(){this.playAction(t.RUN)},i.gotoFly=function(){this.playAction(t.FLY)},i.flip=function(){"up"==this.status?(this.status="down",this.body.skewX=180,this.body.skewY=180,this.body.scaleX=-1):"down"==this.status&&(this.status="up",this.body.skewX=0,this.body.skewY=0,this.body.scaleX=1)},i.isInEffect=!1,i.showEffect=function(){this.invincibleEnergy.value>=80&&this.isInEffect||(IS_PAUSE=!0),this.isInEffect=!0,this.gotoFly(),FLOOR_SPEED=10,Laya.loader.load("res/particle/particle.part",Handler.create(this,this.Showparticle),null,Laya.Loader.JSON)},i.Showparticle=function(t){SoundManager.playSound("res/wav/Invincible_start.wav",1),this.sp=new Laya.Particle2D(t),this.sp.x=1.5*this.body.x,this.sp.y-=20,this.addChild(this.sp),this.sp.emitter.start(),this.sp.emitter._emissionRate=20,this.sp.play(),IS_PAUSE=!1},i.hideEffect=function(){SoundManager.playSound("res/wav/Invincible_end.wav"),this.sp.stop(),IS_FLOOR_SPEED_MAX=!1,FLOOR_SPEED=FLOOR_SPEED_DEFAULT,this.isInEffect=!1,this.gotoRun()}}(),function(){function t(){this.bg=null,this.mapFloor=null,this.player=null,this.hpEnergy=null,this.speedEnergy=null,this.score=0,this.isFirstPlayGame=!0,t.__super.call(this),this.init()}Laya["class"](t,"RunGame",Sprite);var i=t.prototype;i.init=function(){this.bg=new BackGround,this.addChild(this.bg),this.mapFloor=new MapFloor,this.addChild(this.mapFloor),this.Invincible=new EnergyBar(EnergyBar.TYPE_INVINCIBLE),this.Invincible.y=7,this.addChild(this.Invincible),this.Deceleration=new EnergyBar(EnergyBar.TYPE_DECELERATION),this.Deceleration.y=7,this.Deceleration.x=this.Invincible.width+10,this.addChild(this.Deceleration),this.scoreText=new Text,this.scoreText.color=SCORETEXT_COLOR,this.scoreText.fontSize=SCORETEXT_FONT_SIZE,this.scoreText.text=SCORETEXT_TEXT_DEFAULT,this.scoreText.width=BG_WIDTH,this.scoreText.align=SCORETEXT_ALIGN,this.scoreText.x=-10,this.scoreText.y=10,this.addChild(this.scoreText),this.player=new Player(this.Invincible,this.Deceleration),this.addChild(this.player),Laya.stage.on(laya.events.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.timer.frameLoop(1,this,this.onLoop)},i.onLoop=function(){for(var t=this.mapFloor.numChildren-1;t>-1;t--){var i=this.mapFloor.getChildAt(t);this.player.isOnFloor||i.checkHit(this.player.x,this.player.y,this.player.status)&&("up"==this.player.status?(this.player.isStopDown=!0,this.player.y=(BG_HEIGHT-FLOOR_HEIGHT)/2-PLAYER_HEIGHT+30,this.bg.cat.pos(1.2*BG_WIDTH,this.player.y-30),this.player.isOnFloor=!0):"down"==this.player.status);for(var e=i.getAllItems(),s=i.getAllNpcs(),a=0;a<e.length;a++){var n=e[a];n.visible&&this.player.hitCheck(this.player.body.x,this.player.y,n.x+i.x-PLAYER_WIDTH,n.y,n.directionStatus,n.type,this.player.status)&&(n.type==Item.ITEM_TYPE_DECELERATION?(SoundManager.playSound("res/wav/DecelerationCounting.wav",1),n.visible=!1,this.player.decelerationEnergy.addEnergyValue(20),this.player.decelerationEnergy.value>=100&&(this.player.isInEffect||(this.player.decelerationEnergy.updateEnergyValue(100),this.player.isInLowerSpeed=!0,SoundManager.playSound("res/wav/LowerSpeed.wav",1),i.moveLower(this)))):n.type==Item.ITEM_TYPE_INCINCIBLE?(SoundManager.playSound("res/wav/InvincibleCounting.wav",1),n.visible=!1,this.player.invincibleEnergy.addEnergyValue(20),100!=this.player.invincibleEnergy.value||this.player.isInEffect||this.player.showEffect()):(this.scoreAdd(1),SoundManager.playSound("res/wav/StarCounting.wav",1),n.visible=!1))}for(var r=0;r<s.length;r++){var h=s[r];if(h.visible&&this.player.hitCheck(this.player.body.x,this.player.y,h.x+i.x-PLAYER_WIDTH,h.y,h.directionStatus,h.type,this.player.status))switch(h.type){case Npc.NPC_TYPE_BIRD:if(this.player.isInEffect)break;this.stopAllGame();var o=!0;initGame(o)}}}},i.scoreAdd=function(t){this.scoreText.text=parseInt(this.scoreText.text)+t},i.onMouseDown=function(){this.isFirstPlayGame&&(Laya.stage.removeChild(gameInfo),IS_PAUSE=!1,isFirstPlayGame=!1),this.player.isOnFloor&&(this.player.flip(),"up"==this.player.status?this.player.y=(BG_HEIGHT-FLOOR_HEIGHT)/2-PLAYER_HEIGHT+30:"down"==this.player.status&&(this.player.y=(BG_HEIGHT+FLOOR_HEIGHT)/2+PLAYER_HEIGHT-15))},i.stopAllGame=function(){Laya.stage.renderingEnabled=!1,this.player.decelerationEnergy.updateEnergyValue(0),this.player.invincibleEnergy.updateEnergyValue(0),this.scoreText.text=SCORETEXT_TEXT_DEFAULT,FLOOR_SPEED=FLOOR_SPEED_DEFAULT,SoundManager.stopAll(),this.player.status="down",Laya.timer.clear(this,this.onLoop)}}();